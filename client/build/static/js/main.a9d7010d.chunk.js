(this["webpackJsonptest-sigma-front-react"]=this["webpackJsonptest-sigma-front-react"]||[]).push([[1],{124:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r(21),s=r.n(c),u=(r(63),r(64),r(65),r(6)),a="/",o="/register",i="/login",b="/user",l=r(22),j=r(33),d=r(15),g=r(16),O=r(2),h=["component","isAuthenticated","redirectTo"],f=Object(d.b)((function(e){return{isAuthenticated:g.c.getIsAuthenticated(e)}}))((function(e){var t=e.component,r=e.isAuthenticated,n=e.redirectTo,c=Object(j.a)(e,h);return Object(O.jsx)(u.b,Object(l.a)(Object(l.a)({},c),{},{render:function(e){return r?Object(O.jsx)(t,Object(l.a)({},e)):Object(O.jsx)(u.a,{to:n})}}))})),p=["component","isAuthenticated","redirectTo"],x=Object(d.b)((function(e){return{isAuthenticated:g.c.getIsAuthenticated(e)}}))((function(e){var t=e.component,r=e.isAuthenticated,n=e.redirectTo,c=Object(j.a)(e,p);return Object(O.jsx)(u.b,Object(l.a)(Object(l.a)({},c),{},{render:function(e){return r&&c.restricted?Object(O.jsx)(u.a,{to:n}):Object(O.jsx)(t,Object(l.a)({},e))}}))})),m=r(54),v=r.n(m),k=(r(113),function(){return Object(O.jsx)(v.a,{className:"loader",type:"TailSpin",color:"grey",height:50,width:50,timeout:2e3})}),S=r(38),y=r(125),C=r(126),E=r(127),w=r(128),U=r(129),A=r(130),R=r(131),q=r(18),T=r(32),I=function(e){var t=Object(n.useState)(!0),r=Object(S.a)(t,2),c=r[0],s=r[1],u=Object(d.d)((function(e){return g.c.getIsAuthenticated(e)})),a=Object(d.d)((function(e){return e.auth.token}));Object(n.useEffect)((function(){}),[u]);var o=Object(d.c)(),i=function(){return s(!c)};return Object(O.jsx)("div",{children:Object(O.jsxs)(y.a,{className:"mx-3",color:"faded",light:!0,isAuthenticated:u,children:[Object(O.jsx)(C.a,{href:"/",className:"mr-auto",children:Object(O.jsx)(T.a,{color:"faded"})}),Object(O.jsx)(E.a,{onClick:i,className:"mr-2"}),Object(O.jsx)(w.a,{isOpen:!c,navbar:!0,children:Object(O.jsx)(U.a,{navbar:!0,children:u?Object(O.jsx)(A.a,{children:Object(O.jsx)(q.b,{style:{textDecoration:"none"},to:"/",onClick:function(){o(g.a.logOut(a.token)),u=!u,i()},exact:!0,children:Object(O.jsx)(R.a,{children:"Logout"})})}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(A.a,{children:Object(O.jsx)(q.b,{style:{textDecoration:"none"},to:"/register",exact:!0,children:Object(O.jsx)(R.a,{onClick:i,children:"Register"})})}),Object(O.jsx)(A.a,{children:Object(O.jsx)(q.b,{style:{textDecoration:"none"},to:"/login",children:Object(O.jsx)(R.a,{onClick:i,children:"Login"})})})]})})})]})})},N=function(){return Object(O.jsxs)("div",{style:{position:"fixed",left:"0px",bottom:"0px",height:"30px",width:"100%",textDecoration:"none",margin:"15px"},children:[Object(O.jsx)(R.a,{href:"https://www.linkedin.com/in/vitalii-chervonyi/",target:"_blank",color:"faded"}),Object(O.jsx)(T.b,{})]})},z=r(17),D=(r(121),Object(n.lazy)((function(){return r.e(6).then(r.bind(null,141))}))),F=Object(n.lazy)((function(){return Promise.all([r.e(0),r.e(5)]).then(r.bind(null,142))})),L=Object(n.lazy)((function(){return Promise.all([r.e(0),r.e(4)]).then(r.bind(null,148))})),P=Object(n.lazy)((function(){return r.e(7).then(r.bind(null,132))}));var B=function(){var e=Object(d.d)((function(e){return g.c.getIsAuthenticated(e)}));return Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)(z.a,{autoClose:2e3}),Object(O.jsx)("header",{children:Object(O.jsx)(I,{})}),Object(O.jsx)("main",{children:Object(O.jsx)(n.Suspense,{fallback:Object(O.jsx)(k,{}),children:Object(O.jsxs)(u.d,{children:[Object(O.jsx)(u.b,{exact:!0,redirectTo:"/",path:a,component:D}),Object(O.jsx)(x,{public:!0,redirectTo:"/login",path:i,component:L}),Object(O.jsx)(x,{public:!0,redirectTo:"/register",path:o,component:F}),Object(O.jsx)(f,{redirectTo:"/user",path:b,component:P,isAuthenticated:e}),Object(O.jsx)(u.a,{to:a})]})})}),Object(O.jsx)("footer",{children:Object(O.jsx)(N,{})})]})},Y=function(e){e&&e instanceof Function&&r.e(8).then(r.bind(null,149)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,u=t.getTTFB;r(e),n(e),c(e),s(e),u(e)}))},J=r(55),W=r(11),_=r(57),G=r(7),H=r(20),K=r(56),M=r.n(K),Q=Object(_.a)(Object(G.d)({serializableCheck:{ignoredActions:[H.a,H.f,H.b,H.c,H.d,H.e]}})),V={key:"auth",storage:M.a,whitelist:["token"]},X=Object(G.a)({reducer:{auth:Object(H.g)(V,g.b)},middleware:Q,devTools:!1}),Z={store:X,persistor:Object(H.h)(X)},$=Object(W.a)();s.a.render(Object(O.jsx)(d.a,{store:Z.store,children:Object(O.jsx)(J.a,{loading:null,persistor:Z.persistor,children:Object(O.jsx)(q.a,{children:Object(O.jsx)(u.c,{history:$,children:Object(O.jsx)(B,{})})})})}),document.getElementById("root")),Y()},16:function(e,t,r){"use strict";r.d(t,"b",(function(){return S})),r.d(t,"a",(function(){return q})),r.d(t,"c",(function(){return T}));var n,c,s,u,a=r(7),o=Object(a.b)("auth/registerRequest"),i=Object(a.b)("auth/registerSuccess"),b=Object(a.b)("auth/registerError"),l=Object(a.b)("auth/loginRequest"),j=Object(a.b)("auth/loginSuccess"),d=Object(a.b)("auth/loginError"),g={registerRequest:o,registerSuccess:i,registerError:b,logoutRequest:Object(a.b)("auth/logoutRequest"),logoutSuccess:Object(a.b)("auth/logoutSuccess"),logoutError:Object(a.b)("auth/logoutError"),loginRequest:l,loginSuccess:j,loginError:d,getCurrentUserRequest:Object(a.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(a.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(a.b)("auth/getCurrentUserError")},O=r(8),h=r(10),f={name:null,secondName:null,email:null,password:null,birthdate:null},p=Object(a.c)(f,(n={},Object(O.a)(n,g.registerSuccess,(function(e,t){return t.payload.user})),Object(O.a)(n,g.loginSuccess,(function(e,t){return t.payload.user})),Object(O.a)(n,g.logoutSuccess,(function(){return f})),Object(O.a)(n,g.getCurrentUserSuccess,(function(e,t){return t.payload})),n)),x=Object(a.c)(null,(c={},Object(O.a)(c,g.registerSuccess,(function(e,t){return t.payload.token})),Object(O.a)(c,g.loginSuccess,(function(e,t){return t.payload.token})),Object(O.a)(c,g.logoutSuccess,(function(){return null})),c)),m=function(e,t){return t.payload},v=Object(a.c)(null,(s={},Object(O.a)(s,g.registerError,m),Object(O.a)(s,g.loginError,m),Object(O.a)(s,g.logoutError,m),Object(O.a)(s,g.getCurrentUserError,m),s)),k=Object(a.c)(!1,(u={},Object(O.a)(u,g.registerSuccess,(function(){return!0})),Object(O.a)(u,g.loginSuccess,(function(){return!0})),Object(O.a)(u,g.getCurrentUserSuccess,(function(){return!0})),Object(O.a)(u,g.registerError,(function(){return!1})),Object(O.a)(u,g.loginError,(function(){return!1})),Object(O.a)(u,g.getCurrentUserError,(function(){return!1})),Object(O.a)(u,g.logoutSuccess,(function(){return!1})),u)),S=Object(h.b)({user:p,isAuthenticated:k,token:x,error:v}),y=r(19),C=r.n(y),E=r(26),w=r(23),U=r.n(w),A=r(17);U.a.defaults.baseURL="https://testsigma.herokuapp.com";var R={set:function(e){U.a.defaults.headers.common.Authorization="Bearer ".concat(e)},unset:function(){U.a.defaults.headers.common.Authorization=""}},q={register:function(e){return function(){var t=Object(E.a)(C.a.mark((function t(r){var n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(g.registerRequest()),t.prev=1,t.next=4,U.a.post("/api/users/register",e);case 4:n=t.sent,R.set(n.data.token),A.b.success("You are registered and logged in!"),r(g.registerSuccess(n.data)),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),r(g.registerError(t.t0.message)),t.t0.message.includes("409")?A.b.error("User is already exist!"):A.b.error(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},logOut:function(e){return function(){var t=Object(E.a)(C.a.mark((function t(r){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r(g.logoutRequest()),t.prev=1,e){t.next=4;break}return t.abrupt("return");case 4:return R.set(e),t.next=7,U.a.post("/api/users/logout");case 7:A.b.success("You are logged out!"),r(g.logoutSuccess(R)),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(1),A.b.error(t.t0.message),r(g.logoutError(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()},logIn:function(e){return function(){var t=Object(E.a)(C.a.mark((function t(r){var n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(g.loginRequest()),t.prev=1,t.next=4,U.a.post("/api/users/login",e);case 4:n=t.sent,R.set(n.data.token),A.b.success("You are logged in!"),r(g.loginSuccess(n.data)),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),r(g.loginError(t.t0.message)),t.t0.message.includes("401")?A.b.error("Wrong email or password!"):A.b.error(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var e=Object(E.a)(C.a.mark((function e(t,r){var n,c,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r(),c=n.auth.token){e.next=3;break}return e.abrupt("return");case 3:return R.set(c),t(g.getCurrentUserRequest()),e.prev=5,e.next=8,U.a.get("/users/current");case 8:s=e.sent,t(g.getCurrentUserSuccess(s.data)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),t(g.getCurrentUserError(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,r){return e.apply(this,arguments)}}()}},T={getIsAuthenticated:function(e){return e.auth.isAuthenticated},getUserName:function(e){return e.auth.user.name},getUserSecondname:function(e){return e.auth.user.secondName},getUserEmail:function(e){return e.auth.user.email},getUserPassword:function(e){return e.auth.user.password},getUserBirthdate:function(e){return e.auth.user.birthdate}}},63:function(e,t,r){},65:function(e,t,r){}},[[124,2,3]]]);
//# sourceMappingURL=main.a9d7010d.chunk.js.map
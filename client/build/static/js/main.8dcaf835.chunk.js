(this["webpackJsonptest-sigma-front-react"]=this["webpackJsonptest-sigma-front-react"]||[]).push([[0],{121:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r(22),s=r.n(c),u=(r(61),r(62),r(27)),a=(r(63),r(7)),o="/",i="/register",b="/login",j="/user",l=r(20),O=r(33),d=r(15),g=r(16),h=r(2),f=["component","redirectTo"],p=function(e){var t=e.component,r=e.redirectTo,n=Object(O.a)(e,f),c=Object(d.d)((function(e){return g.c.getIsAuthenticated(e)}));return Object(h.jsx)(a.b,Object(l.a)(Object(l.a)({},n),{},{render:function(e){return c?Object(h.jsx)(t,Object(l.a)({},e)):Object(h.jsx)(a.a,{to:r})}}))},x=["component","isAuthenticated","redirectTo"],m=Object(d.b)((function(e){return{isAuthenticated:g.c.getIsAuthenticated(e)}}))((function(e){var t=e.component,r=e.isAuthenticated,n=e.redirectTo,c=Object(O.a)(e,x);return Object(h.jsx)(a.b,Object(l.a)(Object(l.a)({},c),{},{render:function(e){return r&&c.restricted?Object(h.jsx)(a.a,{to:n}):Object(h.jsx)(t,Object(l.a)({},e))}}))})),v=r(6),S=r(52),k=r.n(S),y=(r(111),function(){return Object(h.jsx)(k.a,Object(v.a)({className:"loader",type:"TailSpin",color:"grey",height:50,width:50,timeout:2e3},"color","#3f51b5"))}),E=r(122),w=r(123),C=r(124),U=r(125),A=r(126),R=r(127),q=r(128),T=r(17),I=r(32),N=function(e,t){var r=Object(n.useState)(!0),c=Object(u.a)(r,2),s=c[0],a=c[1],o=Object(d.d)((function(e){return g.c.getIsAuthenticated(e)}));Object(n.useEffect)((function(){}),[o]),console.log(o);var i=Object(d.c)();return Object(h.jsx)("div",{children:Object(h.jsxs)(E.a,{className:"mx-3",color:"faded",light:!0,isAuthenticated:o,children:[Object(h.jsx)(w.a,{href:"/",className:"mr-auto",children:Object(h.jsx)(I.a,{color:"faded"})}),Object(h.jsx)(C.a,{onClick:function(){return a(!s)},className:"mr-2"}),Object(h.jsx)(U.a,{isOpen:!s,navbar:!0,children:Object(h.jsx)(A.a,{navbar:!0,children:o?Object(h.jsx)(R.a,{children:Object(h.jsx)(T.a,{style:{textDecoration:"none"},to:"/",onClick:function(){return i(g.a.logOut())},exact:!0,children:Object(h.jsx)(q.a,{children:"Logout"})})}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(R.a,{children:Object(h.jsx)(T.a,{style:{textDecoration:"none"},to:"/register",exact:!0,children:Object(h.jsx)(q.a,{children:"Register"})})}),Object(h.jsx)(R.a,{children:Object(h.jsx)(T.a,{style:{textDecoration:"none"},to:"/login",children:Object(h.jsx)(q.a,{children:"Login"})})})]})})})]})})},z=function(){return Object(h.jsxs)("div",{style:{position:"fixed",left:"0px",bottom:"0px",height:"30px",width:"100%",textDecoration:"none",margin:"15px"},children:[Object(h.jsx)(q.a,{href:"https://www.linkedin.com/in/vitalii-chervonyi/",target:"_blank",color:"faded"}),Object(h.jsx)(I.b,{})]})},L=Object(n.lazy)((function(){return r.e(5).then(r.bind(null,131))})),D=Object(n.lazy)((function(){return r.e(4).then(r.bind(null,132))})),F=Object(n.lazy)((function(){return r.e(3).then(r.bind(null,133))})),B=Object(n.lazy)((function(){return r.e(6).then(r.bind(null,134))}));var P=function(e){e.histry;var t=Object(n.useState)(!0),r=Object(u.a)(t,2),c=(r[0],r[1]);return Object(d.d)((function(e){return g.c.getIsAuthenticated(e)})),Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)("header",{children:Object(h.jsx)(N,{setLoged:c})}),Object(h.jsx)("main",{children:Object(h.jsx)(n.Suspense,{fallback:Object(h.jsx)(y,{}),children:Object(h.jsxs)(a.d,{children:[Object(h.jsx)(a.b,{exact:!0,redirectTo:"/",path:o,component:L}),Object(h.jsx)(m,{public:!0,redirectTo:"/login",path:b,component:F}),Object(h.jsx)(m,{public:!0,redirectTo:"/register",path:i,component:D}),Object(h.jsx)(p,{redirectTo:"/user",path:j,component:B}),Object(h.jsx)(a.a,{to:"/"})]})})}),Object(h.jsx)("footer",{children:Object(h.jsx)(z,{})})]})},J=function(e){e&&e instanceof Function&&r.e(7).then(r.bind(null,135)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,u=t.getTTFB;r(e),n(e),c(e),s(e),u(e)}))},_=r(53),G=r(11),H=r(55),K=r(8),M=r(19),Q=r(54),V=r.n(Q),W=Object(H.a)(Object(K.d)({serializableCheck:{ignoredActions:[M.a,M.f,M.b,M.c,M.d,M.e]}})),X={key:"auth",storage:V.a,whitelist:["token"]},Y=Object(K.a)({reducer:{auth:Object(M.g)(X,g.b)},middleware:W,devTools:!1}),Z={store:Y,persistor:Object(M.h)(Y)},$=Object(G.a)();s.a.render(Object(h.jsx)(d.a,{store:Z.store,children:Object(h.jsx)(_.a,{loading:null,persistor:Z.persistor,children:Object(h.jsx)(a.c,{history:$,children:Object(h.jsx)(P,{})})})}),document.getElementById("root")),J()},16:function(e,t,r){"use strict";r.d(t,"b",(function(){return k})),r.d(t,"a",(function(){return q})),r.d(t,"c",(function(){return T}));var n,c,s,u,a=r(8),o=Object(a.b)("auth/registerRequest"),i=Object(a.b)("auth/registerSuccess"),b=Object(a.b)("auth/registerError"),j=Object(a.b)("auth/loginRequest"),l=Object(a.b)("auth/loginSuccess"),O=Object(a.b)("auth/loginError"),d={registerRequest:o,registerSuccess:i,registerError:b,logoutRequest:Object(a.b)("auth/logoutRequest"),logoutSuccess:Object(a.b)("auth/logoutSuccess"),logoutError:Object(a.b)("auth/logoutError"),loginRequest:j,loginSuccess:l,loginError:O,getCurrentUserRequest:Object(a.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(a.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(a.b)("auth/getCurrentUserError")},g=r(6),h=r(10),f={name:null,secondName:null,email:null,password:null,birthdate:null},p=Object(a.c)(f,(n={},Object(g.a)(n,d.registerSuccess,(function(e,t){return t.payload.user})),Object(g.a)(n,d.loginSuccess,(function(e,t){return t.payload.user})),Object(g.a)(n,d.logoutSuccess,(function(){return f})),Object(g.a)(n,d.getCurrentUserSuccess,(function(e,t){return t.payload})),n)),x=Object(a.c)(null,(c={},Object(g.a)(c,d.registerSuccess,(function(e,t){return t.payload.token})),Object(g.a)(c,d.loginSuccess,(function(e,t){return t.payload.token})),Object(g.a)(c,d.logoutSuccess,(function(){return null})),c)),m=function(e,t){return t.payload},v=Object(a.c)(null,(s={},Object(g.a)(s,d.registerError,m),Object(g.a)(s,d.loginError,m),Object(g.a)(s,d.logoutError,m),Object(g.a)(s,d.getCurrentUserError,m),s)),S=Object(a.c)(!1,(u={},Object(g.a)(u,d.registerSuccess,(function(){return!0})),Object(g.a)(u,d.loginSuccess,(function(){return!0})),Object(g.a)(u,d.getCurrentUserSuccess,(function(){return!0})),Object(g.a)(u,d.registerError,(function(){return!1})),Object(g.a)(u,d.loginError,(function(){return!1})),Object(g.a)(u,d.getCurrentUserError,(function(){return!1})),Object(g.a)(u,d.logoutSuccess,(function(){return!1})),u)),k=Object(h.b)({user:p,isAuthenticated:S,token:x,error:v}),y=r(18),E=r.n(y),w=r(25),C=r(21),U=r.n(C);U.a.defaults.baseURL="http://localhost:3000";var A=function(e){U.a.defaults.headers.common.Authorization="Bearer ".concat(e)},R=function(){U.a.defaults.headers.common.Authorization=""},q={register:function(e){return function(){var t=Object(w.a)(E.a.mark((function t(r){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(d.registerRequest()),t.prev=1,t.next=4,U.a.post("/api/users/register",e);case 4:n=t.sent,A(n.data.token),r(d.registerSuccess(n.data)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.log("\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435 \u043e\u0431 \u043e\u0448\u0438\u0431\u043a\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u0438 \u0435\u0435 \u043f\u0440\u0438\u0447\u0438\u043d\u0435(\u0438\u0437 \u043e\u0442\u0432\u0435\u0442\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430)",t.t0),r(d.registerError(t.t0.message));case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},logOut:function(){return function(){var e=Object(w.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(d.logoutRequest()),e.prev=1,e.next=4,U.a.post("/api/users/logout");case 4:R(),t(d.logoutSuccess()),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435 \u043e\u0431 \u043e\u0448\u0438\u0431\u043a\u0435 \u0432\u044b\u0445\u043e\u0434\u0430 \u0438 \u0435\u0435 \u043f\u0440\u0438\u0447\u0438\u043d\u0435(\u0438\u0437 \u043e\u0442\u0432\u0435\u0442\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430)",e.t0),t(d.logoutError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},logIn:function(e){return function(){var t=Object(w.a)(E.a.mark((function t(r){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(d.loginRequest()),t.prev=1,t.next=4,U.a.post("/api/users/login",e);case 4:n=t.sent,A(n.data.token),r(d.loginSuccess(n.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),r(d.loginError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var e=Object(w.a)(E.a.mark((function e(t,r){var n,c,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r(),c=n.auth.token){e.next=3;break}return e.abrupt("return");case 3:return A(c),t(d.getCurrentUserRequest()),e.prev=5,e.next=8,U.a.get("/users/current");case 8:s=e.sent,t(d.getCurrentUserSuccess(s.data)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),t(d.getCurrentUserError(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,r){return e.apply(this,arguments)}}()}},T={getIsAuthenticated:function(e){return e.auth.isAuthenticated},getUserName:function(e){return e.auth.user.name},getUserSecondname:function(e){return e.auth.user.secondName},getUserEmail:function(e){return e.auth.user.email},getUserPassword:function(e){return e.auth.user.password},getUserBirthdate:function(e){return e.auth.user.birthdate}}},61:function(e,t,r){},63:function(e,t,r){}},[[121,1,2]]]);
//# sourceMappingURL=main.8dcaf835.chunk.js.map
(this["webpackJsonptest-sigma-front-react"]=this["webpackJsonptest-sigma-front-react"]||[]).push([[1],{121:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r(21),s=r.n(c),a=(r(63),r(64),r(27)),u=(r(65),r(7)),o="/",i="/register",b="/login",l="/user",j=r(22),d=r(34),O=r(15),g=r(16),h=r(2),f=["component","redirectTo"],p=function(e){var t=e.component,r=e.redirectTo,n=Object(d.a)(e,f),c=Object(O.d)((function(e){return g.c.getIsAuthenticated(e)}));return Object(h.jsx)(u.b,Object(j.a)(Object(j.a)({},n),{},{render:function(e){return c?Object(h.jsx)(t,Object(j.a)({},e)):Object(h.jsx)(u.a,{to:r})}}))},x=["component","isAuthenticated","redirectTo"],m=Object(O.b)((function(e){return{isAuthenticated:g.c.getIsAuthenticated(e)}}))((function(e){var t=e.component,r=e.isAuthenticated,n=e.redirectTo,c=Object(d.a)(e,x);return Object(h.jsx)(u.b,Object(j.a)(Object(j.a)({},c),{},{render:function(e){return r&&c.restricted?Object(h.jsx)(u.a,{to:n}):Object(h.jsx)(t,Object(j.a)({},e))}}))})),v=r(6),S=r(54),y=r.n(S),k=(r(110),function(){return Object(h.jsx)(y.a,Object(v.a)({className:"loader",type:"TailSpin",color:"grey",height:50,width:50,timeout:2e3},"color","#3f51b5"))}),E=r(122),w=r(123),C=r(124),U=r(125),A=r(126),R=r(127),q=r(128),T=r(18),I=r(33),N=function(e,t){var r=Object(n.useState)(!0),c=Object(a.a)(r,2),s=c[0],u=c[1],o=Object(O.d)((function(e){return g.c.getIsAuthenticated(e)}));Object(n.useEffect)((function(){}),[o]),console.log(o);var i=Object(O.c)();return Object(h.jsx)("div",{children:Object(h.jsxs)(E.a,{className:"mx-3",color:"faded",light:!0,isAuthenticated:o,children:[Object(h.jsx)(w.a,{href:"/",className:"mr-auto",children:Object(h.jsx)(I.a,{color:"faded"})}),Object(h.jsx)(C.a,{onClick:function(){return u(!s)},className:"mr-2"}),Object(h.jsx)(U.a,{isOpen:!s,navbar:!0,children:Object(h.jsx)(A.a,{navbar:!0,children:o?Object(h.jsx)(R.a,{children:Object(h.jsx)(T.a,{style:{textDecoration:"none"},to:"/",onClick:function(){return i(g.a.logOut())},exact:!0,children:Object(h.jsx)(q.a,{children:"Logout"})})}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(R.a,{children:Object(h.jsx)(T.a,{style:{textDecoration:"none"},to:"/register",exact:!0,children:Object(h.jsx)(q.a,{children:"Register"})})}),Object(h.jsx)(R.a,{children:Object(h.jsx)(T.a,{style:{textDecoration:"none"},to:"/login",children:Object(h.jsx)(q.a,{children:"Login"})})})]})})})]})})},z=function(){return Object(h.jsxs)("div",{style:{position:"fixed",left:"0px",bottom:"0px",height:"30px",width:"100%",textDecoration:"none",margin:"15px"},children:[Object(h.jsx)(q.a,{href:"https://www.linkedin.com/in/vitalii-chervonyi/",target:"_blank",color:"faded"}),Object(h.jsx)(I.b,{})]})},L=r(17),D=(r(118),Object(n.lazy)((function(){return r.e(6).then(r.bind(null,137))}))),F=Object(n.lazy)((function(){return Promise.all([r.e(0),r.e(5)]).then(r.bind(null,138))})),P=Object(n.lazy)((function(){return Promise.all([r.e(0),r.e(4)]).then(r.bind(null,144))})),B=Object(n.lazy)((function(){return r.e(7).then(r.bind(null,145))}));var J=function(e){e.histry;var t=Object(n.useState)(!0),r=Object(a.a)(t,2),c=(r[0],r[1]);return Object(O.d)((function(e){return g.c.getIsAuthenticated(e)})),Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(L.a,{autoClose:5e3}),Object(h.jsx)("header",{children:Object(h.jsx)(N,{setLoged:c})}),Object(h.jsx)("main",{children:Object(h.jsx)(n.Suspense,{fallback:Object(h.jsx)(k,{}),children:Object(h.jsxs)(u.d,{children:[Object(h.jsx)(u.b,{exact:!0,redirectTo:"/",path:o,component:D}),Object(h.jsx)(m,{public:!0,redirectTo:"/login",path:b,component:P}),Object(h.jsx)(m,{public:!0,redirectTo:"/register",path:i,component:F}),Object(h.jsx)(p,{redirectTo:"/user",path:l,component:B}),Object(h.jsx)(u.a,{to:"/"})]})})}),Object(h.jsx)("footer",{children:Object(h.jsx)(z,{})})]})},Y=function(e){e&&e instanceof Function&&r.e(8).then(r.bind(null,146)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,a=t.getTTFB;r(e),n(e),c(e),s(e),a(e)}))},W=r(55),_=r(11),G=r(57),H=r(8),K=r(20),M=r(56),Q=r.n(M),V=Object(G.a)(Object(H.d)({serializableCheck:{ignoredActions:[K.a,K.f,K.b,K.c,K.d,K.e]}})),X={key:"auth",storage:Q.a,whitelist:["token"]},Z=Object(H.a)({reducer:{auth:Object(K.g)(X,g.b)},middleware:V,devTools:!1}),$={store:Z,persistor:Object(K.h)(Z)},ee=Object(_.a)();s.a.render(Object(h.jsx)(O.a,{store:$.store,children:Object(h.jsx)(W.a,{loading:null,persistor:$.persistor,children:Object(h.jsx)(u.c,{history:ee,children:Object(h.jsx)(J,{})})})}),document.getElementById("root")),Y()},16:function(e,t,r){"use strict";r.d(t,"b",(function(){return k})),r.d(t,"a",(function(){return T})),r.d(t,"c",(function(){return I}));var n,c,s,a,u=r(8),o=Object(u.b)("auth/registerRequest"),i=Object(u.b)("auth/registerSuccess"),b=Object(u.b)("auth/registerError"),l=Object(u.b)("auth/loginRequest"),j=Object(u.b)("auth/loginSuccess"),d=Object(u.b)("auth/loginError"),O={registerRequest:o,registerSuccess:i,registerError:b,logoutRequest:Object(u.b)("auth/logoutRequest"),logoutSuccess:Object(u.b)("auth/logoutSuccess"),logoutError:Object(u.b)("auth/logoutError"),loginRequest:l,loginSuccess:j,loginError:d,getCurrentUserRequest:Object(u.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(u.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(u.b)("auth/getCurrentUserError")},g=r(6),h=r(10),f=r(17),p={name:null,secondName:null,email:null,password:null,birthdate:null},x=Object(u.c)(p,(n={},Object(g.a)(n,O.registerSuccess,(function(e,t){return t.payload.user})),Object(g.a)(n,O.loginSuccess,(function(e,t){return t.payload.user})),Object(g.a)(n,O.logoutSuccess,(function(){return p})),Object(g.a)(n,O.getCurrentUserSuccess,(function(e,t){return t.payload})),n)),m=Object(u.c)(null,(c={},Object(g.a)(c,O.registerSuccess,(function(e,t){return t.payload.token})),Object(g.a)(c,O.loginSuccess,(function(e,t){return t.payload.token})),Object(g.a)(c,O.logoutSuccess,(function(){return null})),c)),v=function(e,t){return t.payload},S=Object(u.c)(null,(s={},Object(g.a)(s,O.registerError,v),Object(g.a)(s,O.loginError,v),Object(g.a)(s,O.logoutError,v),Object(g.a)(s,O.getCurrentUserError,v),s)),y=Object(u.c)(!1,(a={},Object(g.a)(a,O.registerSuccess,(function(){return!0})),Object(g.a)(a,O.loginSuccess,(function(){return!0})),Object(g.a)(a,O.getCurrentUserSuccess,(function(){return!0})),Object(g.a)(a,O.registerError,(function(){return!1})),Object(g.a)(a,O.loginError,(function(){return!1})),Object(g.a)(a,O.getCurrentUserError,(function(){return!1})),Object(g.a)(a,O.logoutSuccess,(function(){return!1})),a)),k=Object(h.b)({user:x,isAuthenticated:y,token:m,error:S}),E=r(19),w=r.n(E),C=r(26),U=r(23),A=r.n(U);A.a.defaults.baseURL="http://localhost:3000";var R=function(e){A.a.defaults.headers.common.Authorization="Bearer ".concat(e)},q=function(){A.a.defaults.headers.common.Authorization=""},T={register:function(e){return function(){var t=Object(C.a)(w.a.mark((function t(r){var n;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(O.registerRequest()),t.prev=1,t.next=4,A.a.post("/api/users/register",e);case 4:n=t.sent,R(n.data.token),f.b.success("You are registered!"),r(O.registerSuccess(n.data)),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),r(O.registerError(t.t0.message)),t.t0.message.includes("409")?f.b.error("User is already exist!"):f.b.error(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},logOut:function(){return function(){var e=Object(C.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(O.logoutRequest()),e.prev=1,e.next=4,A.a.post("/api/users/logout");case 4:q(),t(O.logoutSuccess()),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435 \u043e\u0431 \u043e\u0448\u0438\u0431\u043a\u0435 \u0432\u044b\u0445\u043e\u0434\u0430 \u0438 \u0435\u0435 \u043f\u0440\u0438\u0447\u0438\u043d\u0435(\u0438\u0437 \u043e\u0442\u0432\u0435\u0442\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430)",e.t0),t(O.logoutError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},logIn:function(e){return function(){var t=Object(C.a)(w.a.mark((function t(r){var n;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(O.loginRequest()),t.prev=1,t.next=4,A.a.post("/api/users/login",e);case 4:n=t.sent,R(n.data.token),f.b.success("You are logged in!"),r(O.loginSuccess(n.data)),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),r(O.loginError(t.t0.message)),t.t0.message.includes("401")?f.b.error("Wrong email or password!"):f.b.error(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var e=Object(C.a)(w.a.mark((function e(t,r){var n,c,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r(),c=n.auth.token){e.next=3;break}return e.abrupt("return");case 3:return R(c),t(O.getCurrentUserRequest()),e.prev=5,e.next=8,A.a.get("/users/current");case 8:s=e.sent,t(O.getCurrentUserSuccess(s.data)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),t(O.getCurrentUserError(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,r){return e.apply(this,arguments)}}()}},I={getIsAuthenticated:function(e){return e.auth.isAuthenticated},getUserName:function(e){return e.auth.user.name},getUserSecondname:function(e){return e.auth.user.secondName},getUserEmail:function(e){return e.auth.user.email},getUserPassword:function(e){return e.auth.user.password},getUserBirthdate:function(e){return e.auth.user.birthdate}}},63:function(e,t,r){},65:function(e,t,r){}},[[121,2,3]]]);
//# sourceMappingURL=main.8af10d51.chunk.js.map